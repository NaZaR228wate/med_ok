<!doctype html>
<html lang="uk">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Дякуємо за замовлення — med_ok</title>

    <!-- Не індексуємо сторінку подяки -->
    <meta name="robots" content="noindex,nofollow" />
    <link rel="canonical" href="https://nazar228wate.github.io/med_ok/thank-you.html" />

    <!-- OG (на випадок шерингу) -->
    <meta property="og:title" content="Дякуємо за замовлення — med_ok">
    <meta property="og:description" content="Ваше замовлення прийняте. Ми скоро зв’яжемося для уточнення деталей.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://nazar228wate.github.io/med_ok/thank-you.html">
    <meta property="og:image" content="https://nazar228wate.github.io/med_ok/assets/prod-mixed.webp">

    <!-- PWA -->
    <link rel="icon" href="assets/medok-wordmark.png">
    <meta name="theme-color" content="#087B04">
    <link rel="manifest" href="manifest.webmanifest">

    <style>
        :root{--bg:#fff9f2;--card:#ffffff;--text:#222;--muted:#666;--accent:#f5b942;--accent-2:#ffcf66;--ok:#2ecc71;--border:#eee;--shadow:0 10px 30px rgba(0,0,0,.06)}
        *{box-sizing:border-box}
        body{font-family:Inter,system-ui,sans-serif;margin:0;color:var(--text);background:linear-gradient(160deg,var(--bg) 0%,#fff 60%)}
        .wrap{max-width:760px;margin:48px auto;padding:0 20px}
        .card{background:var(--card);border:1px solid var(--border);border-radius:18px;box-shadow:var(--shadow);padding:28px}
        .hero{display:flex;gap:18px;align-items:center;margin-bottom:6px}
        .hgroup h1{margin:0;font-size:26px}
        .hgroup p{margin:6px 0 0;color:var(--muted)}
        .mark{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(180deg,var(--accent-2),var(--accent));color:#000;padding:6px 10px;border-radius:10px;font-weight:600}
        .code{display:inline-flex;align-items:center;gap:10px;user-select:text;background:#fff7dc;border:1px dashed #f0c153;border-radius:12px;padding:6px 10px;font-variant-numeric:tabular-nums}
        .row{display:flex;gap:12px;flex-wrap:wrap}
        .row>div{flex:1 1 220px}
        .section{margin-top:20px}
        .section h3{margin:0 0 10px;font-size:18px}
        .list{margin:8px 0 0 16px}
        .list li{margin:4px 0}
        .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
        .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;border-radius:12px;text-decoration:none;border:1px solid var(--border);background:#fff;color:#111;transition:.2s transform,.2s box-shadow}
        .btn:hover{transform:translateY(-1px);box-shadow:0 8px 20px rgba(0,0,0,.06)}
        .btn.primary{background:var(--ok);color:#fff;border-color:transparent}
        .btn.copy{background:#fffdf3}
        .check{width:54px;height:54px;min-width:54px;border-radius:50%;background:radial-gradient(65% 65% at 50% 50%,#d5ffd5 0%,#c4f3c4 100%);display:grid;place-items:center;box-shadow:0 8px 24px rgba(46,204,113,.35)}
        .check svg{width:30px;height:30px;stroke:#1e9e54;stroke-width:3;fill:none;stroke-linecap:round;stroke-linejoin:round}
        .draw{stroke-dasharray:60;stroke-dashoffset:60;animation:draw .7s .15s ease forwards}
        @keyframes draw { to { stroke-dashoffset:0 } }
        .muted{color:var(--muted)}
        .toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:12px;opacity:0;pointer-events:none;transition:.25s opacity;font-size:14px}
        .toast.show{opacity:1}
    </style>

<!-- medok fixes: footer logo scale + header logo behavior -->
<style>
/* Footer logo must never stretch */
footer img[alt*="medok"],
.site-footer .logo img,
.footer .logo img,
img.footer-logo {
  height: auto !important;
  width: auto !important;
  max-height: 48px;
  max-width: 180px;
  object-fit: contain !important;
}
/* Prevent generic img rules from stretching logos */
footer .logo, .site-footer .logo { display: inline-flex; align-items: center; }
</style>

<script>
// Avoid full reload if user already on home when clicking brand logo
(function(){
  function norm(p){ try{ return (p || location.pathname).replace(/\/index\.html$/,'/'); }catch(e){ return '/'; } }
  document.querySelectorAll('a[href="/"], a[href$="index.html"].js-home-logo, a.brand-logo, a.logo-link').forEach(function(a){
    a.classList.add('js-home-logo');
    a.addEventListener('click', function(e){
      var here = norm(location.pathname);
      var target = norm(a.getAttribute('href') || '/');
      if (here === '/' && target === '/') {
        e.preventDefault();
        // Just scroll to top smoothly instead of reloading
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }, {passive:false});
  });
})();
</script>
</head>
<body>
<div class="wrap">
    <div class="card">
        <div class="hero">
            <div class="check">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path class="draw" d="M20 6L9 17l-5-5"/></svg>
            </div>
            <div class="hgroup">
                <span class="mark">Дякуємо! Замовлення прийнято</span>
                <h1>Ми зв’яжемося з вами найближчим часом, щоб уточнити деталі</h1>
            </div>
        </div>

        <p class="code">
            <strong>Номер замовлення:</strong>
            <span id="orderId">—</span>
            <button id="copyBtn" class="btn copy" style="padding:6px 10px">Скопіювати</button>
        </p>

        <div id="summary" class="section" hidden>
            <h3>Підсумок</h3>
            <div class="row">
                <div><b>Ім’я:</b> <span id="name"></span></div>
                <div><b>Телефон:</b> <span id="phone"></span></div>
                <div><b>Оплата:</b> <span id="pay"></span></div>
            </div>
            <div class="row">
                <div><b>Місто (НП):</b> <span id="city"></span></div>
                <div><b>Відділення:</b> <span id="wh"></span></div>
            </div>
            <div id="items" class="section"></div>
            <div id="total" class="section"></div>
        </div>

        <div class="actions">
            <a class="js-home-logo btn primary" href="index.html">До каталогу меду</a>
            <a class="btn" href="index.html#products">Подивитися продукцію</a>
        </div>
    </div>
</div>

<div id="toast" class="toast">Скопійовано ✅</div>

<script>
    (function(){
        // 1) orderId з URL
        const params = new URLSearchParams(location.search);
        const orderId = params.get('order') || '—';
        document.getElementById('orderId').textContent = orderId;

        // 2) Підсумок із sessionStorage
        try {
            const data = JSON.parse(sessionStorage.getItem('medok_last_order') || 'null');
            if (data) {
                const $ = id => document.getElementById(id);
                $('summary').hidden = false;
                $('name').textContent  = data.name || '';
                $('phone').textContent = data.phone || '';
                $('pay').textContent   = data.pay === 'prepay' ? 'Повна передоплата' : 'Накладений платіж';
                $('city').textContent  = data.np_city || '';
                $('wh').textContent    = data.np_warehouse || '';

                const items = document.getElementById('items');
                if (data.from_cart && Array.isArray(data.cart)) {
                    const title = document.createElement('h3'); title.textContent = 'Товари';
                    const ul = document.createElement('ul'); ul.className='list';
                    data.cart.forEach(i=>{
                        const li = document.createElement('li');
                        li.textContent = `${i.type} — ${i.qty} л × ${i.count} шт`;
                        ul.appendChild(li);
                    });
                    items.append(title, ul);
                    const sum = (typeof data.total === 'number') ? data.total : null;
                    if (sum != null) document.getElementById('total').innerHTML = `<b>Разом:</b> ${sum} грн`;
                } else if (data.honey) {
                    const title = document.createElement('h3'); title.textContent = 'Товар';
                    const p = document.createElement('p'); p.textContent = `${data.honey}, кількість: ${data.qty} л`;
                    items.append(title, p);
                }

                // очистити після показу
                sessionStorage.removeItem('medok_last_order');
                // прибрати ?order=… (косметика)
                history.replaceState({}, '', 'thank-you.html');
            }
        } catch {}

        // 3) Copy button
        const copyBtn = document.getElementById('copyBtn');
        const toast = document.getElementById('toast');
        copyBtn?.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(document.getElementById('orderId').textContent.trim());
                toast.classList.add('show');
                setTimeout(()=>toast.classList.remove('show'), 1200);
            } catch {}
        });
    })();
</script>
</body>
</html>
